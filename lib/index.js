import n,{resolve as t}from"path";import{readdirSync as e,statSync as r,writeFileSync as i}from"fs";var o=function(n,t){return 0===n.files.length&&0===n.folders.length?"":function(n){return"---\ntitle: "+n.title+"\n---\n## 该章节包含以下内容"}({title:t})+"\n  \n  "+n.files.map((function(n){return"\n- [".concat(n.replace(".md",""),"](").concat(n,")\n\n  ")})).join("")+n.folders.map((function(n){var t=n.items.map((function(t){return"\n- [".concat(t.replace(".md",""),"](").concat(n.link+"/"+t,")\n\n  ")})).join("");return"\n#### [".concat(n.title,"专题](").concat(n.link,")\n    ")+t})).join("")},c={subNavShow:[],ignoreFolders:[],ignoreFiles:[],dirPrefix:"📂  ",filePrefix:"✏️  ",deep:2};function s(){return c||{}}var u=function(t,i,o){return void 0===i&&(i=[]),void 0===o&&(o=[]),e(t).sort().filter((function(e){var c=r(n.join(t,e)),s=e.slice(e.lastIndexOf(".")+1);return c.isFile()&&i.includes(s)&&a(e)&&!o.includes(e)}))},a=function(n){return"readme.md"!==n.toLocaleLowerCase()},f=function(t,i){void 0===t&&(t=".");var o=e(t),c=[];return o.forEach((function(e){var o=n.join(t,e);r(o).isDirectory()&&!i.includes(e)&&c.push(o)})),c},l=function(t,e,r){void 0===e&&(e=[]),void 0===r&&(r=[]);var c={files:u(t,["md"],r),folders:f(t,e).map((function(n){return{title:n.substring(n.lastIndexOf("/")+1),link:n.replace(t,"."),items:u(n,["md"],r)||[]}}))},s=o(c,t.substring(t.lastIndexOf("/")+1)),a=n.join(t,"./README.md");i(a,s)},d=f,v=l,m=function(n,t){return void 0===t&&(t=[]),f(n,t).length>0},p=function(n,t){void 0===t&&(t="");var e=s(),r=u(n,["md"],e.ignoreFiles);return l(n),r.map((function(n){return t+n}))},x=function(n,t,e){void 0===e&&(e="/");var r=s();if(t>=r.deep)return[];var i=[];d(n,r.ignoreFolders).forEach((function(n){var o=n.substring(n.lastIndexOf("/")+1),c=e+o+"/";v(n),m(n,r.ignoreFolders)?i.push({text:"".concat(r.dirPrefix).concat(o),link:c,items:0===t||r.subNavShow.includes(o)?x(n,t+1,c):[]}):i.push({text:"".concat(r.dirPrefix).concat(o),link:c})}));var o=[];return(o=p(n,e)).length>0&&o.sort().filter((function(n){return!r.ignoreFiles.includes(n.substring(n.lastIndexOf("/")+1,n.lastIndexOf(".")))})).forEach((function(n){i.push({text:"".concat(r.filePrefix).concat(n.substring(n.lastIndexOf("/")+1,n.lastIndexOf("."))),link:n})})),i},g=function(n){n||(n=c),function(n){c=n}(Object.assign({},c,n));var e=t(process.cwd(),"docs");return x(e,0)};export{g as default};
